:root{
  --bg:#0c0c0f;
  --bg-soft:#121218;
  --panel:#171726;
  --text:#e9e8f5;
  --muted:#b8b6d4;
  --accent:#7a49ff;
  --accent-2:#9b7bff;
  --border:rgba(255,255,255,.08);
  --shadow: 0 8px 24px rgba(0,0,0,.5);
  --radius:14px;
}

html,body{height:100%}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* Light (si toggle) */
body.light{
  --bg:#f6f6fb;
  --bg-soft:#fff;
  --panel:#fff;
  --text:#222331;
  --muted:#5a5d70;
  --border:rgba(0,0,0,.08);
  --shadow: 0 10px 24px rgba(0,0,0,.08);
}

/* ===== Topbar ===== */
.topbar{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:14px 16px;
  background:linear-gradient(180deg,var(--bg),rgba(0,0,0,0));
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(10px);
}
.topbar__left,.topbar__right{display:flex; gap:10px; align-items:center}

.pill{
  background:transparent; color:var(--text);
  border:1px solid var(--border);
  padding:10px 14px; border-radius:999px; cursor:pointer;
}
.pill:active{transform:translateY(1px)}

.icon-pill{
  width:42px; height:42px; border-radius:999px;
  display:grid; place-items:center; cursor:pointer;
  background:transparent; color:var(--text);
  border:1px solid var(--border);
}

.token-badge{
  display:flex; align-items:center; gap:6px;
  padding:10px 14px; border-radius:16px;
  background: radial-gradient(120% 120% at 100% 0%, rgba(122,73,255,.25), transparent),
              linear-gradient(0deg, rgba(122,73,255,.15), rgba(122,73,255,.15));
  border:1px solid var(--border);
  box-shadow: var(--shadow);
  font-weight:700;
}

/* ===== Subheader ===== */
.subheader{
  display:flex; align-items:center; gap:10px;
  padding:8px 16px; border-bottom:1px solid var(--border);
}
.dot{width:10px; height:10px; border-radius:50%}
.dot--on{background:#27d17f; box-shadow:0 0 12px #27d17f}
.brand{color:var(--muted)}

/* ===== Chat ===== */
.chat{min-height:calc(100dvh - 160px); padding:18px 12px 96px}
.messages{display:flex; flex-direction:column; gap:12px; max-width:760px; margin:0 auto}
.bubble{
  padding:14px 16px; border-radius:16px;
  border:1px solid var(--border); background:var(--panel);
  box-shadow: var(--shadow);
}
.bubble.user{background:transparent}
.bubble.typing{opacity:.7}

/* ===== Composer bottom ===== */
.composer{
  position:fixed; left:0; right:0; bottom:0; z-index:30;
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-top:1px solid var(--border);
  background:linear-gradient(0deg,var(--bg) 0%, rgba(0,0,0,0) 100%);
}
.fab{
  width:44px; height:44px; border-radius:14px; font-size:22px;
  border:1px solid var(--border); background:var(--panel); color:var(--text);
  box-shadow: var(--shadow);
}
.composer__input{
  flex:1; display:flex; align-items:center; gap:8px;
  background:var(--panel); border:1px solid var(--border);
  border-radius:16px; padding:6px 8px; box-shadow:var(--shadow);
}
#userInput{
  flex:1; background:transparent; border:0; outline:0; color:var(--text);
  padding:8px 10px; font-size:16px;
}
.inset{
  width:44px; height:44px; border-radius:12px; border:1px solid var(--border);
  background:transparent; color:var(--text);
}
.send{
  width:52px; height:52px; border-radius:16px; border:0; cursor:pointer;
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  color:white; font-weight:800; box-shadow:var(--shadow);
}

/* ===== Sheet ===== */
.sheet-bg{
  position:fixed; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(3px);
  z-index:40;
}
.sheet{
  position:fixed; left:0; right:0; bottom:0; z-index:41;
  background:var(--panel); border-top:1px solid var(--border);
  padding:16px; border-radius:16px 16px 0 0; box-shadow:var(--shadow);
}
.sheet__title{font-weight:700; margin-bottom:12px}
.sheet__row{display:flex; gap:10px; flex-wrap:wrap}
.sheet-btn{
  border:1px solid var(--border); background:transparent; color:var(--text);
  border-radius:12px; padding:10px 12px;
}
.sheet-close{
  margin-top:12px; border:1px solid var(--border); background:transparent; color:var(--text);
  border-radius:999px; padding:10px 14px;
}

/* ===== Menu (burger) ===== */
.menu{
  position:absolute; right:12px; top:66px; z-index:25;
  background:var(--panel); border:1px solid var(--border);
  border-radius:12px; box-shadow:var(--shadow); overflow:hidden;
}
.menu-item{
  display:block; width:100%; text-align:left; padding:12px 14px;
  background:transparent; color:var(--text); border:0; cursor:pointer;
}
.menu-item + .menu-item{border-top:1px solid var(--border)}

/* ===== Modales ===== */
.modal{
  border:1px solid var(--border); border-radius:16px; padding:16px;
  background:var(--panel); color:var(--text); box-shadow:var(--shadow);
  max-width:520px;
}
.modal::backdrop{background:rgba(0,0,0,.5)}
.modal__actions{display:flex; justify-content:flex-end; margin-top:12px}
.modal--lg{max-width:640px}
