:root{
  --bg: #0b0b10;
  --bg-soft:#111119;
  --fg: #e8e8f0;
  --fg-dim:#b9b9c8;
  --violet:#7a4cff;
  --violet-2:#9b7dff;
  --pill:#1a1a27;
  --pill-b:#29293a;
  --glow: 0 0 18px rgba(122,76,255,.35);
  --ring: 0 0 0 1px rgba(255,255,255,.06) inset;
  --shadow: 0 8px 26px rgba(0,0,0,.35);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.4 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,system-ui;}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

/* Topbar */
.topbar{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(10,10,16,.95),rgba(10,10,16,.75));backdrop-filter:blur(10px);display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.06)}
.topbar .pill{background:var(--pill);border:1px solid var(--pill-b);color:var(--fg);border-radius:16px;padding:8px 14px;box-shadow:var(--ring)}
.topbar .icon{padding:8px 12px}
.topbar .left,.topbar .right{display:flex;gap:10px;align-items:center}
.topbar .center{display:flex;justify-content:center}
.gem{display:flex;align-items:center;gap:10px;background:linear-gradient(180deg,rgba(122,76,255,.18),rgba(122,76,255,.08));border:1px solid rgba(122,76,255,.45);box-shadow:var(--glow),var(--ring);color:#d9ccff}
.gem .emoji{filter:drop-shadow(0 0 6px rgba(122,76,255,.6))}

/* Burger menu */
.menu{position:absolute;right:12px;top:56px;background:rgba(20,20,32,.95);border:1px solid rgba(255,255,255,.07);border-radius:14px;box-shadow:var(--shadow);overflow:hidden}
.menu.hidden{display:none}
.menu-item{display:block;background:transparent;border:0;color:var(--fg);padding:12px 16px;width:200px;text-align:left}
.menu-item+.menu-item{border-top:1px solid rgba(255,255,255,.06)}
.menu-item:active{background:rgba(255,255,255,.05)}

/* Brand line */
.brandline{display:flex;align-items:center;gap:10px;padding:10px 14px 6px 14px;color:var(--fg-dim)}
.brandline .dot{width:10px;height:10px;border-radius:50%;background:#1ef58b;box-shadow:0 0 10px #1ef58b}

/* Messages */
.chat{max-width:900px;margin:0 auto}
.messages{padding:10px 14px 0 14px}
.bubble{max-width:86%;margin:10px 0;padding:14px 16px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);box-shadow:var(--ring),var(--shadow)}
.from-user{margin-left:auto;background:linear-gradient(180deg,rgba(122,76,255,.22),rgba(122,76,255,.10));border-color:rgba(122,76,255,.45);box-shadow:var(--glow),var(--ring)}
.scroll-spacer{height:90px}

/* Composer fixed bottom */
.composer{position:fixed;left:0;right:0;bottom:0;padding:10px 12px calc(10px + var(--safe-bottom));background:linear-gradient(180deg,rgba(10,10,16,0),rgba(10,10,16,.75));backdrop-filter:blur(8px);display:flex;gap:10px;align-items:center}
.plus{min-width:44px;height:44px;border-radius:14px;background:var(--pill);border:1px solid var(--pill-b);color:var(--fg)}
.input-wrap{flex:1;display:flex;align-items:center;background:var(--bg-soft);border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:var(--ring)}
.input-wrap input{flex:1;padding:12px 14px;background:transparent;border:0;color:var(--fg);font-size:16px}
.input-wrap .mic{background:transparent;border:0;padding:8px 12px;color:var(--fg-dim)}
.send{min-width:54px;height:44px;border-radius:16px;border:0;background:linear-gradient(180deg,var(--violet),var(--violet-2));color:white;box-shadow:0 8px 20px rgba(122,76,255,.45)}
.send:active{transform:translateY(1px)}

.sheet{position:fixed;left:12px;right:12px;bottom:calc(66px + var(--safe-bottom));background:rgba(20,20,32,.95);border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:var(--shadow)}
.sheet.hidden{display:none}
.sheet-title{padding:12px 14px;color:var(--fg-dim)}
.sheet-row{display:flex;gap:10px;padding:0 12px 12px 12px}
.sheet-btn{flex:1;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);color:var(--fg);border-radius:12px;padding:10px}
.sheet-close{margin:0 12px 12px 12px;border:0;background:transparent;color:var(--fg-dim)}

.pill.close{background:var(--pill);border:1px solid var(--pill-b)}

/* Popup */
.popup{border:0;padding:0;background:transparent}
.popup::backdrop{background:rgba(0,0,0,.55)}
.popup-card{margin:0 auto;max-width:680px;background:rgba(20,20,32,.97);border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:var(--shadow);padding:16px;color:var(--fg)}
.popup-card .pill{margin-top:12px}

.hidden{display:none}

/* Light mode */
body.light{--bg:#f7f7fb;--bg-soft:#ffffff;--fg:#1d1d24;--fg-dim:#4b4b66;--pill:#f3f3ff;--pill-b:#e0e0f0;--ring:0 0 0 1px rgba(0,0,0,.05) inset;--shadow:0 8px 26px rgba(0,0,0,.08)}
