<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Philom√®ne I.A. ‚Äî v1.0</title>
  <style>
    :root{
      --bg:#0f0f13; --card:#191922; --text:#e8e8ee; --muted:#a8a8b7;
      --accent:#7a42ff; --accent-2:#9d7bff; --outline:#3b2a6a;
      --chip:#222232; --chip-border:#3a3a52; --shadow:0 8px 24px rgba(0,0,0,.35);
      --good:#38d27a; --danger:#ff5d6c; --ring:0 0 0 2px var(--outline);
    }
    [data-theme="light"]{
      --bg:#f7f7fb; --card:#ffffff; --text:#12131a; --muted:#4b4b5a;
      --accent:#6b34ff; --accent-2:#8e6bff; --outline:#cfc8ff;
      --chip:#f1efff; --chip-border:#ded9ff; --shadow:0 6px 18px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      display:flex; flex-direction:column;
    }
    /* Header */
    .topbar{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.1) blur(6px);
      background:color-mix(in oklab, var(--bg) 92%, transparent);
      border-bottom:1px solid var(--chip-border);
    }
    .topwrap{max-width:980px;margin:0 auto;padding:10px 14px;display:flex;gap:10px;align-items:center}
    .spacer{flex:1}
    .title-line{
      max-width:980px;margin:0 auto;padding:6px 16px 10px;color:var(--muted);
      display:flex;align-items:center;gap:8px;
    }
    .dot{width:10px;height:10px;border-radius:50%;background:var(--good);box-shadow:0 0 0 3px rgba(56,210,122,.15)}
    .version{font-weight:600;color:var(--text)}
    /* Chips */
    .chip{
      border:1px solid var(--chip-border); background:var(--chip);
      color:var(--text); padding:10px 14px; border-radius:14px;
      display:inline-flex; align-items:center; gap:10px; cursor:pointer;
      box-shadow:var(--shadow); user-select:none;
    }
    .chip:active{transform:translateY(1px)}
    .ghost{background:transparent}
    .diamond{
      display:inline-flex;align-items:center;gap:10px;padding:10px 16px;border-radius:14px;
      background:linear-gradient(180deg, rgba(122,66,255,.18), rgba(122,66,255,.10));
      border:1px solid var(--outline); color:#b5a6ff; font-weight:800; letter-spacing:.3px;
      box-shadow:var(--shadow);
    }
    .diamond .icon{filter:drop-shadow(0 0 6px rgba(122,66,255,.6))}
    .menu-btn{width:44px;aspect-ratio:1;border-radius:12px;display:inline-grid;place-items:center}
    /* Burger menu */
    .menu-panel{
      position:absolute; right:14px; top:58px; width:220px; border-radius:14px;
      background:var(--card); border:1px solid var(--chip-border); box-shadow:var(--shadow);
      display:none; overflow:hidden;
    }
    .menu-panel.open{display:block}
    .menu-item{display:flex;gap:10px;align-items:center;padding:12px 14px;cursor:pointer}
    .menu-item:hover{background:color-mix(in oklab, var(--card) 80%, #000 20%)}
    /* Chat area */
    .container{max-width:980px;margin:0 auto; padding:14px}
    .bubble{
      background:var(--card); border:1px solid var(--chip-border); border-radius:18px;
      padding:16px 18px; max-width:min(680px, 92%); box-shadow:var(--shadow);
    }
    /* Composer */
    .composer-wrap{position:sticky;bottom:0;background:linear-gradient(180deg, transparent, rgba(0,0,0,.22) 28%, rgba(0,0,0,.35)); padding:12px 14px}
    .composer{
      max-width:980px;margin:0 auto;display:flex;gap:10px;align-items:center;
    }
    .fab{
      width:44px;height:44px;border-radius:12px;background:var(--card);border:1px solid var(--chip-border);
      display:grid;place-items:center;cursor:pointer;box-shadow:var(--shadow);
    }
    .input{
      flex:1; display:flex; align-items:center; gap:10px; background:var(--card);
      border:1px solid var(--chip-border); border-radius:14px; padding:10px 12px;
    }
    .input input{
      flex:1; background:transparent; color:var(--text); border:0; outline:none; font:inherit;
    }
    .send{
      width:48px;height:48px;border-radius:14px;display:grid;place-items:center;cursor:pointer;
      background:var(--accent); color:#fff; border:1px solid var(--outline); box-shadow:var(--shadow);
    }
    /* Action sheet (+) */
    .sheet-bg{
      position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; z-index:60;
    }
    .sheet{
      position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
      width:min(520px,92%); background:var(--card); border:1px solid var(--chip-border);
      border-radius:16px; box-shadow:var(--shadow); display:none; z-index:61; overflow:hidden;
    }
    .sheet.open, .sheet-bg.open{display:block}
    .sheet h4{margin:0;padding:14px 16px;color:var(--muted);border-bottom:1px solid var(--chip-border)}
    .sheet-row{display:flex;gap:10px;padding:12px 12px}
    .sheet button{
      flex:1; padding:14px 12px; border-radius:12px; border:1px solid var(--chip-border);
      background:var(--chip); color:var(--text); cursor:pointer;
    }
    /* Dialog */
    .dialog-bg{position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; z-index:70}
    .dialog{
      position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
      width:min(560px,92%); background:var(--card); border:1px solid var(--chip-border);
      border-radius:16px; box-shadow:var(--shadow); display:none; z-index:71; padding:18px;
    }
    .dialog.open,.dialog-bg.open{display:block}
    .dialog .close{margin-top:14px;text-align:right}
    .link{color:#8ab1ff;text-decoration:none}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="topwrap">
      <button id="loginBtn" class="chip ghost">Connexion</button>
      <button id="buyBtn" class="chip ghost">Acheter</button>
      <div class="spacer"></div>
      <div class="diamond" id="tokenBadge" title="Solde de tokens">
        <span class="icon">üíé</span><span id="tokenCount">1 000 000</span>
      </div>
      <button id="menuBtn" class="chip menu-btn" aria-label="Menu">‚ò∞</button>
      <div id="menuPanel" class="menu-panel" role="menu" aria-hidden="true">
        <div id="toggleTheme" class="menu-item">üåó Mode jour / nuit</div>
        <div id="openFaq" class="menu-item">‚ùì F.A.Q.</div>
      </div>
    </div>
    <div class="title-line">
      <span class="dot" aria-hidden="true"></span>
      <span>Philom√®ne I.A. ‚Äî <span class="version">version 1.0</span></span>
    </div>
  </header>

  <main class="container" id="chat">
    <div class="bubble" style="margin-top:8px;">
      Bonjour üëã Je suis Philom√®ne I.A., propuls√©e par GPT-5 Thinking.
    </div>
  </main>

  <div class="composer-wrap">
    <div class="composer">
      <button id="plusBtn" class="fab" aria-label="Plus">Ôºã</button>
      <div class="input">
        <input id="userInput" placeholder="√âcrivez votre message‚Ä¶" />
        <button id="micBtn" class="fab" title="Micro">üé§</button>
      </div>
      <button id="sendBtn" class="send" aria-label="Envoyer">‚û§</button>
    </div>
  </div>

  <!-- Action sheet (+) -->
  <div id="sheetBg" class="sheet-bg"></div>
  <div id="sheet" class="sheet" role="dialog" aria-modal="true" aria-label="Actions">
    <h4>Joindre‚Ä¶</h4>
    <div class="sheet-row">
      <button id="pickPhoto">üì∑ Phototh√®que</button>
      <button id="takePhoto">üì∏ Prendre une photo</button>
      <button id="pickFile">üìÑ Choisir un fichier</button>
    </div>
  </div>

  <!-- Inputs invisibles -->
  <input id="imgLibInput" type="file" accept="image/*" hidden>
  <input id="imgCamInput" type="file" accept="image/*" capture="environment" hidden>
  <input id="docInput" type="file" accept="image/*,.pdf,.txt,.doc,.docx" hidden>

  <!-- Dialog g√©n√©rique -->
  <div id="dlgBg" class="dialog-bg"></div>
  <div id="dialog" class="dialog" role="dialog" aria-modal="true">
    <div id="dialogBody">Texte‚Ä¶</div>
    <div class="close"><button id="dlgClose" class="chip">Fermer</button></div>
  </div>

  <!-- FAQ -->
  <div id="faqBg" class="dialog-bg"></div>
  <div id="faq" class="dialog" role="dialog" aria-modal="true" aria-label="F.A.Q.">
    <div style="max-height:60vh; overflow:auto; padding-right:6px">
      <h3 style="margin:0 0 10px 0;">üí¨ Foire aux questions</h3>
      <p><strong>Quelle IA utilise Philom√®ne ?</strong><br>
      Philom√®ne I.A. est propuls√©e par <strong>GPT-5 Thinking</strong>, la version la plus avanc√©e d‚ÄôOpenAI.</p>
      <p><strong>Comment fonctionnent les tokens ?</strong><br>
      Chaque question + r√©ponse consomment un petit nombre de tokens selon leur longueur. Le diamant üíé affiche votre solde.</p>
      <p><strong>Packs disponibles :</strong><br>
      üíé 1 000 000 tokens ‚Üí 5 ‚Ç¨<br>
      üíé 2 000 000 tokens ‚Üí 10 ‚Ç¨<br>
      üíé 4 000 000 tokens ‚Üí 20 ‚Ç¨<br>
      üéÅ Premier achat : <strong>+50 %</strong> offerts.</p>
      <p><strong>Abonnement ?</strong><br>
      Non. Toute la puissance de GPT-5, sans abonnement. Vous payez uniquement ce que vous consommez.</p>
      <p><strong>Confidentialit√©</strong><br>
      Vos √©changes restent priv√©s.</p>
    </div>
    <div class="close"><button id="faqClose" class="chip">Fermer</button></div>
  </div>

  <script>
  (() => {
    const $ = s => document.querySelector(s);

    // ===== Th√®me (sombre par d√©faut) =====
    const saved = localStorage.getItem("theme");
    if (saved === "light") document.documentElement.setAttribute("data-theme","light");
    const toggleTheme = () => {
      const cur = document.documentElement.getAttribute("data-theme");
      const next = cur === "light" ? "dark" : "light";
      document.documentElement.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    };

    // ===== √âl√©ments =====
    const chat = $("#chat");
    const userInput = $("#userInput");
    const sendBtn = $("#sendBtn");
    const plusBtn = $("#plusBtn");
    const micBtn = $("#micBtn");

    const menuBtn = $("#menuBtn");
    const menuPanel = $("#menuPanel");
    const toggleThemeBtn = $("#toggleTheme");
    const openFaqBtn = $("#openFaq");

    const sheet = $("#sheet");
    const sheetBg = $("#sheetBg");
    const pickPhoto = $("#pickPhoto");
    const takePhoto = $("#takePhoto");
    const pickFile = $("#pickFile");

    const imgLibInput = $("#imgLibInput");
    const imgCamInput = $("#imgCamInput");
    const docInput = $("#docInput");

    const tokenCountEl = $("#tokenCount");
    let tokenCount = 1_000_000;

    const dlgBg = $("#dlgBg");
    const dialog = $("#dialog");
    const dialogBody = $("#dialogBody");
    const dlgClose = $("#dlgClose");

    const faqBg = $("#faqBg");
    const faq = $("#faq");
    const faqClose = $("#faqClose");

    const loginBtn = $("#loginBtn");
    const buyBtn = $("#buyBtn");

    // ===== Utilitaires =====
    const addBubble = (text, who="bot") => {
      const div = document.createElement("div");
      div.className = "bubble";
      div.style.margin = who === "bot" ? "10px 0" : "10px 0 10px auto";
      div.textContent = text;
      chat.appendChild(div);
      window.scrollTo({top: document.body.scrollHeight, behavior: "smooth"});
    };

    const decTokens = (n= Math.ceil(20 + Math.random()*30)) => {
      tokenCount = Math.max(0, tokenCount - n);
      tokenCountEl.textContent = tokenCount.toLocaleString("fr-FR");
    };

    // ===== Envoi message (mock local) =====
    const sendMessage = () => {
      const txt = userInput.value.trim();
      if (!txt) return;
      addBubble(txt, "user");
      userInput.value = "";
      decTokens();
      // R√©ponse mock courte (en prod: fetch backend)
      setTimeout(() => addBubble("üëå Bien re√ßu. Pose-moi la suite !"), 400);
    };

    // ===== Menu burger =====
    menuBtn.addEventListener("click", () => {
      menuPanel.classList.toggle("open");
    });
    document.addEventListener("click", (e) => {
      if (!menuPanel.contains(e.target) && e.target !== menuBtn){
        menuPanel.classList.remove("open");
      }
    });
    toggleThemeBtn.addEventListener("click", () => {
      toggleTheme();
      menuPanel.classList.remove("open");
    });
    openFaqBtn.addEventListener("click", () => {
      menuPanel.classList.remove("open");
      faq.classList.add("open"); faqBg.classList.add("open");
    });
    faqClose.addEventListener("click", ()=>{ faq.classList.remove("open"); faqBg.classList.remove("open"); });
    faqBg.addEventListener("click", ()=>{ faq.classList.remove("open"); faqBg.classList.remove("open"); });

    // ===== Feuille d‚Äôactions (+) =====
    const openSheet = () => { sheet.classList.add("open"); sheetBg.classList.add("open"); };
    const closeSheet = () => { sheet.classList.remove("open"); sheetBg.classList.remove("open"); };
    plusBtn.addEventListener("click", openSheet);
    sheetBg.addEventListener("click", closeSheet);

    pickPhoto.addEventListener("click", ()=> imgLibInput.click());
    takePhoto.addEventListener("click", ()=> imgCamInput.click());
    pickFile.addEventListener("click", ()=> docInput.click());

    const handlePicked = (file, label) => {
      closeSheet();
      if (!file) return;
      addBubble(`‚úÖ ${label} s√©lectionn√©(e) : ${file.name}`, "bot");
      decTokens();
    };
    imgLibInput.addEventListener("change", e => handlePicked(e.target.files?.[0], "Image"));
    imgCamInput.addEventListener("change", e => handlePicked(e.target.files?.[0], "Photo"));
    docInput.addEventListener("change", e => handlePicked(e.target.files?.[0], "Fichier"));

    // ===== Dialogue g√©n√©rique (Connexion / Acheter) =====
    const openDialog = (html) => { dialogBody.innerHTML = html; dialog.classList.add("open"); dlgBg.classList.add("open"); }
    const closeDialog = () => { dialog.classList.remove("open"); dlgBg.classList.remove("open"); }
    dlgClose.addEventListener("click", closeDialog);
    dlgBg.addEventListener("click", closeDialog);

    loginBtn.addEventListener("click", () => {
      openDialog("Connexion : lier ton compte (placeholder).");
    });
    buyBtn.addEventListener("click", () => {
      openDialog("Acheter des tokens : 1M=5‚Ç¨ ‚Ä¢ 2M=10‚Ç¨ ‚Ä¢ 4M=20‚Ç¨ (<b>+50% au 1er achat</b>).");
    });

    // ===== Mic (placeholder) =====
    micBtn.addEventListener("click", ()=>{
      openDialog("üéôÔ∏è Dict√©e (placeholder). Ici on activera l‚ÄôAPI Web Speech ou un upload audio.");
    });

    // ===== Envoi =====
    sendBtn.addEventListener("click", sendMessage);
    userInput.addEventListener("keydown", e=>{ if(e.key==="Enter"){ e.preventDefault(); sendMessage(); }});

    // ===== D√©marrage =====
    tokenCountEl.textContent = tokenCount.toLocaleString("fr-FR");
  })();
  </script>
</body>
</html>
