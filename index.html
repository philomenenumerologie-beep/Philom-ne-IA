<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Philomenia Messenger</title>

  <!-- Clerk Frontend Script -->
  <script 
    async 
    crossorigin="anonymous"
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
    data-clerk-publishable-key="pk_test_ZW5vdWdoLXRyZWVmcm9nLTIuY2xlcmsuYWNjb3VudHMuZGV2JA">
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background:black;
      color:white;
      text-align:center;
      margin:0;
      padding:0;
    }

    h1 {
      margin-top: 35px;
      font-size:28px;
    }

    .card {
      background:#121212;
      width: 90%;
      max-width: 380px;
      padding:20px;
      margin:25px auto;
      border-radius:8px;
      border:1px solid #333;
    }

    button {
      width:100%;
      padding:12px;
      margin-top:10px;
      border:none;
      border-radius:6px;
      font-size:18px;
      cursor:pointer;
      background:#9146FF;
      color:white;
    }
    button:hover { opacity:0.9; }

    #status { margin-bottom:15px; font-size: 16px; opacity:.8; }
  </style>
</head>

<body>
  <h1>Philomenia</h1>
  <p class="muted">Connexion sécurisée</p>

  <div class="card">
    <div id="status">Initialisation…</div>
    <button id="signin">Se connecter</button>
    <button id="signup">Créer un compte</button>
    <button id="signout" style="display:none;background:#FF5555">Se déconnecter</button>
  </div>

  <script>
    async function initClerk() {
      await Clerk.load();

      const user = Clerk.user;
      const status = document.getElementById("status");
      const signin = document.getElementById("signin");
      const signup = document.getElementById("signup");
      const signout = document.getElementById("signout");

      if (user) {
        status.textContent = "Connecté ✅ : " + user.primaryEmailAddress.emailAddress;
        signin.style.display = "none";
        signup.style.display = "none";
        signout.style.display = "block";
      } else {
        status.textContent = "Veuillez vous connecter";
        signin.style.display = "block";
        signup.style.display = "block";
        signout.style.display = "none";
      }

      signin.onclick = () => Clerk.openSignIn();
      signup.onclick = () => Clerk.openSignUp();
      signout.onclick = () => Clerk.signOut();
    }

    window.addEventListener("load", initClerk);
  </script>

</body>
</html>
