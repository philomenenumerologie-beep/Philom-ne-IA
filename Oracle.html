<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PhilomÃ¨ne IA â€” Oracle</title>
  <style>
    :root{
      --bg-a:#0b0f1a;
      --bg-b:#0f1d3a;
      --grad-1:#5b5bd6;
      --grad-2:#00c2b7;
      --card:#131a2b;
      --text:#fff;
      --muted:#b7c0ff;
      --accent:#8ae6df;
      --btn-1:#5b5bd6;
      --btn-2:#00c2b7;
      --user:#243256;
      --bot:#16223c;
    }
    *{box-sizing:border-box}
    body{
      margin:0;color:var(--text);
      font-family: "Poppins",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 800px at 10% -20%, rgba(91,91,214,.25), transparent 60%),
        radial-gradient(1200px 800px at 110% -10%, rgba(0,194,183,.22), transparent 60%),
        linear-gradient(160deg, var(--bg-a), var(--bg-b) 70%);
      min-height:100dvh; display:flex; align-items:center; justify-content:center; padding:32px;
    }
    .app{ width:min(920px, 100%); background:rgba(10,14,25,.55); border:1px solid rgba(138,230,223,.15);
      border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04) }
    header{ padding:28px 26px 10px }
    h1{ margin:0; font-size:clamp(26px, 4.5vw, 36px); line-height:1.15; }
    .brand{display:flex; gap:14px; align-items:center}
    .logo{width:46px; height:46px; border-radius:12px; background:
      radial-gradient(70% 70% at 60% 35%, rgba(255,255,255,.9), rgba(255,255,255,.15) 60%),
      linear-gradient(135deg, var(--grad-1), var(--grad-2));
      box-shadow: 0 10px 25px rgba(0,194,183,.25), inset 0 0 30px rgba(255,255,255,.12)}
    .subtitle{color:var(--muted); margin-top:6px}

    .chat{ padding: 0 16px 16px; display:flex; flex-direction:column; gap:12px; max-height:60dvh; overflow:auto }
    .bubble{ border-radius:16px; padding:14px 16px; line-height:1.55; }
    .bot{ align-self:flex-start; background:var(--bot); border:1px solid rgba(138,230,223,.14)}
    .you{ align-self:flex-end; background:var(--user); border:1px solid rgba(138,230,223,.12)}
    .system{ color:#d7fff9 }

    .composer{ display:flex; gap:10px; padding:16px; border-top:1px solid rgba(138,230,223,.12); background:rgba(0,0,0,.25); border-radius:0 0 20px 20px }
    textarea{
      flex:1; resize:none; min-height:52px; max-height:160px; padding:14px 14px 14px 16px;
      color:var(--text); background:rgba(255,255,255,.03); border:1px solid rgba(138,230,223,.16);
      border-radius:12px; outline:none; box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
    }
    button{
      background:linear-gradient(135deg, var(--btn-1), var(--btn-2));
      color:#fff; border:0; padding:0 22px; border-radius:12px; font-weight:600; cursor:pointer;
      display:flex; align-items:center; gap:10px; min-height:52px; box-shadow:0 10px 22px rgba(0,194,183,.25)
    }
    button:disabled{ opacity:.6; cursor:not-allowed }
    .tips{ color:#bfeeea; font-size:.85rem; padding:0 22px 18px }
    .fade{ animation:fade .35s ease }
    @keyframes fade{ from{opacity:.35; transform:translateY(4px)} to{opacity:1; transform:none} }
  </style>
</head>
<body>
  <main class="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Oracle</h1>
          <div class="subtitle">Conseils clairs â€¢ Vision stratÃ©gique â€¢ Explications simples</div>
        </div>
      </div>
    </header>

    <section id="chat" class="chat">
      <div class="bubble bot fade">
        <strong>Bienvenue ðŸ‘‹</strong><br />
        Je suis <strong class="system">PhilomÃ¨ne Oracle</strong>. Pose-moi des questions sur la prise de dÃ©cision,
        la vie quotidienne, lâ€™apprentissage, la carriÃ¨re, les relations, la spiritualitÃ© pragmatique,
        et je te rÃ©pondrai avec des explications concrÃ¨tes et bienveillantes. âœ¨
      </div>
    </section>

    <form id="composer" class="composer">
      <textarea id="input" placeholder="Ã‰cris ta questionâ€¦ (Shift+EntrÃ©e pour aller Ã  la ligne)"></textarea>
      <button id="send" type="submit">Envoyer âœ¨</button>
    </form>
    <div class="tips">Astuce : Â« Explique-moi simplementâ€¦ Â», Â« Que ferais-tu Ã  ma place ? Â», Â« Donne-moi un plan en 3 Ã©tapesâ€¦ Â»</div>
  </main>

  <script>
    // ðŸ‘‰ Mets ici le mÃªme endpoint que dans societe.html si diffÃ©rent
    const ENDPOINT_PATH = "/chat";

    const SYSTEM_PROMPT = `
Tu es PhilomÃ¨ne Oracle : une IA conseillÃ¨re bienveillante et pragmatique.
- Ton style : clair, simple, humain, sans jargon inutile.
- Tu proposes des Ã©tapes concrÃ¨tes, des exemples, des check-lists courtes.
- Tu sais dire "je ne suis pas mÃ©decin/juriste" quand câ€™est le cas et tu rediriges vers des ressources.
- Tu rÃ©sumes en fin de rÃ©ponse par 2â€“4 bullet points actionnables.
RÃ©ponds en franÃ§ais.`;

    const chat = document.getElementById('chat');
    const form = document.getElementById('composer');
    const input = document.getElementById('input');
    const sendBtn = document.getElementById('send');

    function addBubble(text, who="bot"){
      const div = document.createElement('div');
      div.className = `bubble ${who} fade`;
      div.innerHTML = text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    async function ask(text){
      sendBtn.disabled = true;
      addBubble(text, "you");
      try{
        const r = await fetch(ENDPOINT_PATH, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({ system: SYSTEM_PROMPT, message: text, agent:"oracle"})
        });
        const data = await r.json();
        addBubble(data.reply || "DÃ©solÃ©, je nâ€™ai pas pu rÃ©pondre cette fois.");
      }catch(e){
        addBubble("Oups, une erreur sâ€™est produite. RÃ©essaie.");
      }finally{
        sendBtn.disabled = false;
      }
    }

    form.addEventListener('submit', e=>{
      e.preventDefault();
      const text = input.value.trim();
      if(!text) return;
      input.value = "";
      ask(text);
    });
  </script>
</body>
</html>
