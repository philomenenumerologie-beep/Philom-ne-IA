:root{
  --bg:#0b0a10; --panel:#14131d; --soft:#1f1d2b; --line:#2b2940;
  --text:#e9e7ff; --muted:#a9a5c8; --brand:#6e5bff; --glow:#8d7fff;
}
*{box-sizing:border-box; margin:0; padding:0}
html,body{height:100%}
body{background:var(--bg); color:var(--text); font:16px/1.45 -apple-system,BlinkMacSystemFont,"Inter",Roboto,sans-serif; display:flex; flex-direction:column}

/* Topbar */
.topbar{position:sticky; top:0; z-index:20; display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:rgba(11,10,16,.9); backdrop-filter:saturate(1.1) blur(6px); border-bottom:1px solid var(--line)}
.topbar .left,.topbar .center,.topbar .right{display:flex; align-items:center; gap:10px}
.brand .name{font-weight:800; letter-spacing:.2px}
.pill{display:flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--line); border-radius:12px; background:linear-gradient(180deg,#171525,#10101a)}
.moon{opacity:.9}
.diamond{color:#7ee0ff}
.btn{border:1px solid var(--line); border-radius:12px; padding:10px 12px; color:var(--text); background:var(--panel)}
.btn.ghost{background:transparent}
.btn.solid{background:linear-gradient(180deg,#1e1b2e,#151225)}
.btn.plus{width:56px;height:56px;font-size:28px;border-radius:14px;background:radial-gradient(circle at 50% -10%, #7e71ff, #3a2aff 70%);box-shadow:0 0 20px rgba(110,91,255,.5)}
.btn.send{width:56px;height:56px;font-size:24px;border-radius:14px;background:radial-gradient(circle at 50% -10%, #7e71ff, #3a2aff 70%);box-shadow:0 0 20px rgba(110,91,255,.5)}
.btn:active{transform:translateY(1px)}

/* Side/drawer */
.side{position:fixed; left:0; top:0; bottom:0; width:300px; background:var(--panel); border-right:1px solid var(--line); transform:translateX(-100%); transition:.18s; z-index:30}
.side.show{transform:none}
.side.hidden{display:block}
.side-head{display:flex; justify-content:space-between; align-items:center; padding:12px; border-bottom:1px solid var(--line)}
.side .list{list-style:none; padding:8px}
.side .row{width:100%; text-align:left; padding:12px; border:1px solid var(--line); background:#171526; border-radius:10px; margin:8px 0}

.drawer{position:fixed; right:0; top:0; bottom:0; width:360px; background:var(--panel); border-left:1px solid var(--line); transform:translateX(100%); transition:.18s; z-index:25}
.drawer.show{transform:none}
.drawer-head{display:flex; justify-content:space-between; align-items:center; padding:12px; border-bottom:1px solid var(--line)}
.drawer-body{padding:12px}
.memo{display:grid; gap:8px; margin-top:8px}
.memo li{padding:10px; border:1px solid var(--line); border-radius:10px; background:#171526}

/* Modal */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.5); backdrop-filter:blur(4px); z-index:40}
.modal.hidden{display:none}
.card{width:min(520px,92vw); background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:14px}
.card-head{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px}
.grid{display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px}
.pack{padding:12px;border-radius:12px;border:1px solid var(--line); background:#171526}
.promo{margin-top:8px; color:#9fe28f}
.hint{margin-top:4px; color:var(--muted); font-size:13px}

/* Chat */
.chat{flex:1; padding:14px; display:flex; flex-direction:column; gap:12px; overflow:auto}
.bubble{max-width:88%; padding:14px; border-radius:14px; border:1px solid var(--line); background:#171526}
.bubble.a{align-self:flex-start}
.bubble.u{align-self:flex-end; background:radial-gradient(circle at 50% -10%, #7e71ff, #3a2aff 70%); color:white; border:0}
.typing{align-self:flex-start; display:flex; gap:6px}
.typing span{width:8px;height:8px;border-radius:999px;background:#8d7fff;opacity:.3;animation:b 1s infinite}
.typing span:nth-child(2){animation-delay:.2s}
.typing span:nth-child(3){animation-delay:.4s}
@keyframes b{0%{opacity:.3;transform:scale(1)}30%{opacity:1;transform:scale(1.25)}60%{opacity:.3;transform:scale(1)}}

/* Input */
.input{position:sticky; bottom:0; padding:10px 12px; background:linear-gradient(180deg,transparent,rgba(11,10,16,.96)); border-top:1px solid var(--line)}
.input-row{display:flex; gap:10px; align-items:center}
#msg{flex:1; padding:14px; border-radius:14px; border:1px solid var(--line); background:#12101b; color:var(--text)}
.status{margin-top:8px; display:flex; justify-content:space-between; color:var(--muted); font-size:13px}
.net{color:#ffd166}

/* Plus menu */
.plus-wrap{position:relative}
.plus-menu{position:absolute; bottom:64px; left:0; display:flex; gap:10px; background:#151327; border:1px solid var(--line); padding:10px; border-radius:12px; backdrop-filter:blur(6px); transform:translateY(12px); opacity:0; pointer-events:none; transition:.15s}
.plus-menu.show{transform:none; opacity:1; pointer-events:auto}
.tool{width:44px;height:44px;border-radius:10px;border:1px solid var(--line); background:#191731}

/* Mobile */
@media (max-width:520px){
  .topbar .center{gap:8px}
  .pill{padding:6px 10px}
  .btn.solid .big{font-size:14px}
  .grid{grid-template-columns:1fr}
}
