<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Philomène I.A.</title>

<!-- Style principal -->
<style>
:root {
  --violet: #6c63ff;
  --violet-dark: #3e3b92;
  --fond-nuit: #18181b;
  --fond-jour: #f7f7f8;
  --texte-jour: #222;
  --texte-nuit: #eee;
  --bulle-user: #6c63ff;
  --bulle-ia: #2d2d30;
}
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--fond-nuit);
  color: var(--texte-nuit);
  height: 100vh;
  display: flex;
  flex-direction: column;
  transition: background 0.4s, color 0.4s;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 10;
}
header button {
  background: none;
  border: none;
  color: var(--texte-nuit);
  font-size: 22px;
}
#tokenDisplay {
  font-size: 16px;
  color: #ffd700;
  font-weight: bold;
}
.chat {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  scroll-behavior: smooth;
}
.bulle {
  max-width: 80%;
  padding: 10px 14px;
  border-radius: 16px;
  line-height: 1.4;
  word-wrap: break-word;
}
.user {
  align-self: flex-end;
  background: var(--bulle-user);
  color: white;
}
.ia {
  align-self: flex-start;
  background: var(--bulle-ia);
  color: white;
}
footer {
  display: flex;
  align-items: center;
  padding: 8px;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
  gap: 8px;
}
footer button {
  background: none;
  border: none;
  font-size: 22px;
  color: var(--texte-nuit);
}
footer input {
  flex: 1;
  padding: 10px;
  border-radius: 20px;
  border: none;
  outline: none;
  background: #2e2e33;
  color: white;
}

/* Menu flottant (Plus / Options) */
.floating-menu {
  position: absolute;
  background: rgba(30,30,40,0.95);
  backdrop-filter: blur(8px);
  border-radius: 14px;
  box-shadow: 0 0 10px rgba(0,0,0,0.4);
  padding: 8px 0;
  display: none;
  flex-direction: column;
  z-index: 20;
}
.floating-menu.active { display: flex; animation: scaleIn 0.15s ease-out; }
@keyframes scaleIn { from { transform: scale(0.9); opacity: 0;} to { transform: scale(1); opacity: 1;} }
.menu-item {
  padding: 10px 18px;
  color: #eee;
  display: flex;
  align-items: center;
  gap: 10px;
}
.menu-item:hover { background: rgba(255,255,255,0.1); cursor: pointer; }

/* Thème jour */
body.jour {
  background: var(--fond-jour);
  color: var(--texte-jour);
}
body.jour header, body.jour footer {
  background: rgba(255,255,255,0.8);
  color: var(--texte-jour);
}
body.jour .bulle.ia { background: #ddd; color: #000; }
body.jour .bulle.user { background: var(--violet); color: white; }
body.jour .floating-menu { background: rgba(255,255,255,0.9); color: #000; }

/* À propos */
#apropos {
  position: absolute;
  top: 60px;
  right: 10px;
  left: 10px;
  background: rgba(30,30,40,0.97);
  padding: 20px;
  border-radius: 14px;
  display: none;
  z-index: 30;
  text-align: center;
}
#apropos h3 { margin-top: 0; color: var(--violet); }
#apropos button {
  margin-top: 10px;
  padding: 6px 14px;
  background: var(--violet);
  border: none;
  border-radius: 8px;
  color: white;
}
</style>
</head>

<body>
<header>
  <button id="menuBtn">☰</button>
  <div id="tokenDisplay">💎 5000 tokens</div>
  <button id="optionsBtn">⋯</button>
</header>

<div class="chat" id="chatBox">
  <div class="bulle ia">
    👋 Bonjour ! Je suis <b>Philomène I.A.</b>, votre assistante personnelle.<br>
    Si vous avez un problème, j’ai la solution.<br>
    Vous avez une question, j’ai la réponse.<br>
    Ensemble, on ira plus loin 💫
  </div>
</div>

<footer>
  <button id="plusBtn">＋</button>
  <input id="messageInput" placeholder="Écrivez votre message..." />
  <button id="sendBtn">➤</button>
</footer>

<!-- Menus flottants -->
<div id="plusMenu" class="floating-menu">
  <div class="menu-item">📷 Envoyer une photo</div>
  <div class="menu-item">📄 Envoyer un document</div>
  <div class="menu-item">🎙️ Utiliser le micro</div>
</div>

<div id="optionsMenu" class="floating-menu">
  <div id="toggleTheme" class="menu-item">🌙 Mode jour/nuit</div>
  <div id="toggleSound" class="menu-item">🔊 Son ON/OFF</div>
  <div id="openApropos" class="menu-item">❓ À propos</div>
</div>

<!-- À propos -->
<div id="apropos">
  <h3>💡 Philomène I.A.</h3>
  <p>
    Votre assistante personnelle. Elle vous aide, vous conseille et vous accompagne.<br>
    Ensemble, on ira plus loin 🌙
  </p>
  <button id="closeApropos">Fermer</button>
</div>

<script>
const chatBox = document.getElementById("chatBox");
const input = document.getElementById("messageInput");
const sendBtn = document.getElementById("sendBtn");
const plusBtn = document.getElementById("plusBtn");
const plusMenu = document.getElementById("plusMenu");
const optionsBtn = document.getElementById("optionsBtn");
const optionsMenu = document.getElementById("optionsMenu");
const apropos = document.getElementById("apropos");
const closeApropos = document.getElementById("closeApropos");

// bascule jour/nuit
document.getElementById("toggleTheme").onclick = () => {
  document.body.classList.toggle("jour");
};

// menu +
plusBtn.onclick = (e) => {
  e.stopPropagation();
  plusMenu.style.left = plusBtn.getBoundingClientRect().left + "px";
  plusMenu.style.bottom = "60px";
  plusMenu.classList.toggle("active");
  optionsMenu.classList.remove("active");
};

// menu options
optionsBtn.onclick = (e) => {
  e.stopPropagation();
  optionsMenu.style.right = "10px";
  optionsMenu.style.top = "50px";
  optionsMenu.classList.toggle("active");
  plusMenu.classList.remove("active");
};

// fermer menus en cliquant dehors
window.onclick = () => {
  plusMenu.classList.remove("active");
  optionsMenu.classList.remove("active");
};

// à propos
document.getElementById("openApropos").onclick = () => {
  apropos.style.display = "block";
  optionsMenu.classList.remove("active");
};
closeApropos.onclick = () => (apropos.style.display = "none");

// envoi message
sendBtn.onclick = () => {
  const txt = input.value.trim();
  if (!txt) return;
  const b = document.createElement("div");
  b.className = "bulle user";
  b.textContent = txt;
  chatBox.appendChild(b);
  input.value = "";
  chatBox.scrollTop = chatBox.scrollHeight;

  setTimeout(() => {
    const r = document.createElement("div");
    r.className = "bulle ia";
    r.textContent = "Philomène réfléchit à votre message...";
    chatBox.appendChild(r);
    chatBox.scrollTop = chatBox.scrollHeight;
  }, 500);
};

// corrige le clavier iPhone
input.addEventListener("focus", () => {
  setTimeout(() => {
    input.scrollIntoView({ behavior: "smooth", block: "center" });
  }, 300);
});
</script>
</body>
</html>
