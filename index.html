<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Philomenia Connexion</title>

  <!-- Clerk Frontend -->
  <script async crossorigin="anonymous"
    data-clerk-publishable-key="pk_test_ZW5vdWdoLXRyZWVmcm9nLTIuY2xlcmsuYWNjb3VudHMuZGV2JA"
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js">
  </script>
</head>
<body style="background:black;color:white;text-align:center;margin-top:50px">

  <h1>Connexion sécurisée</h1>
  <p>Philomenia</p>

  <button id="signin">Se connecter</button>
  <button id="signup">Créer un compte</button>

  <script>
    window.addEventListener("load", async () => {
      await Clerk.load();

      // SI DÉJÀ CONNECTÉ -> MESSENGER
      if (Clerk.user) {
        window.location.href = "/messenger.html";
        return;
      }

      // Sinon, on ouvre les fenêtres Clerk
      document.getElementById("signin").onclick = () =>
        Clerk.openSignIn({ redirectUrl: "/messenger.html" });

      document.getElementById("signup").onclick = () =>
        Clerk.openSignUp({ redirectUrl: "/messenger.html" });
    });
  </script>

</body>
</html>
